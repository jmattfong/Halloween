# Halloween

## Setup

### Install Dependencies

You need to have the following things installed to run:
* [nodejs](https://nodejs.org/en/)
* Global dependencies:
```bash
npm install -g typescript
npm install -g ts-node
npm install -g --unsafe-perm homebridge homebridge-config-ui-x
```
* npm dependencies:
```
npm install
```

### Get a Ring refresh token

Also see https://github.com/dgreif/ring/wiki/Refresh-Tokens

* Run the ring-auth-cli command to be prompted for your Ring username and password. You will then receive a text message or email from Ring with the two-factor-auth (2fa) code. Enter it into the prompt to generate a refreshToken.

```bash
ring-auth-cli
```

### Create a secrets/secrets.json File

Create a file located at ```secrets/secrets.json``` with a refreshToken generated by following the instructions above. This file must also contain credentials for accessing Phillips Hue.

```json
{
    "refreshToken": "...",
    "hueUsername":  "...",
    "huePassword":  "..."
}
```

## How To Run
```
ts-node main.ts --sceneToRun="living_room"
```

### Find the IP of a Hue bridge

This can be necessary if you are rate limited by the discovery API

See https://developers.meethue.com/develop/application-design-guidance/hue-bridge-discovery/
See https://developers.meethue.com/develop/get-started-2/